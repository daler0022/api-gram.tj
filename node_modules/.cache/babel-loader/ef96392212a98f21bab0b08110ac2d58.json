{"ast":null,"code":"import _toConsumableArray from \"/home/daler/map/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router'; // Routes\n\nimport { canNavigate } from '@/libs/acl/routeProtection';\nimport { isUserLoggedIn, getUserData, getHomeRouteForLoggedInUser } from '@/auth/utils';\nimport others from './routes/others';\nimport pages from './routes/pages';\nimport defaultProject from './routes/defaultProject';\nVue.use(VueRouter);\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  scrollBehavior: function scrollBehavior() {\n    return {\n      x: 0,\n      y: 0\n    };\n  },\n  routes: [{\n    path: '/',\n    redirect: {\n      name: 'profile'\n    }\n  }].concat(_toConsumableArray(pages), _toConsumableArray(others), _toConsumableArray(defaultProject), [{\n    path: '*',\n    redirect: 'error-404'\n  }])\n});\nrouter.beforeEach(function (to, _, next) {\n  var isLoggedIn = isUserLoggedIn();\n\n  if (!canNavigate(to)) {\n    // Redirect to login if not logged in\n    if (!isLoggedIn) return next({\n      name: 'auth-login'\n    }); // // If logged in => not authorized\n    // return next({ name: 'misc-not-authorized' })\n  } // Redirect if logged in\n\n\n  if (to.meta.redirectIfLoggedIn && isLoggedIn) {\n    var userData = getUserData();\n    next(getHomeRouteForLoggedInUser(userData ? userData.role : null));\n  }\n\n  return next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","canNavigate","isUserLoggedIn","getUserData","getHomeRouteForLoggedInUser","others","pages","defaultProject","use","router","mode","base","process","env","BASE_URL","scrollBehavior","x","y","routes","path","redirect","name","beforeEach","to","_","next","isLoggedIn","meta","redirectIfLoggedIn","userData","role"],"sources":["/home/daler/map/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\n// Routes\nimport { canNavigate } from '@/libs/acl/routeProtection'\nimport { isUserLoggedIn, getUserData, getHomeRouteForLoggedInUser } from '@/auth/utils'\nimport others from './routes/others'\nimport pages from './routes/pages'\nimport defaultProject from './routes/defaultProject'\n\nVue.use(VueRouter)\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  scrollBehavior() {\n    return { x: 0, y: 0 }\n  },\n  routes: [\n    { path: '/', redirect: { name: 'profile' } },\n    ...pages,\n    ...others,\n    ...defaultProject,\n    {\n      path: '*',\n      redirect: 'error-404',\n    },\n  ],\n})\n\nrouter.beforeEach((to, _, next) => {\n  const isLoggedIn = isUserLoggedIn()\n\n  if (!canNavigate(to)) {\n    // Redirect to login if not logged in\n    if (!isLoggedIn) return next({ name: 'auth-login' })\n\n    // // If logged in => not authorized\n    // return next({ name: 'misc-not-authorized' })\n  }\n\n  // Redirect if logged in\n  if (to.meta.redirectIfLoggedIn && isLoggedIn) {\n    const userData = getUserData()\n    next(getHomeRouteForLoggedInUser(userData ? userData.role : null))\n  }\n\n  return next()\n})\n\nexport default router\n"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CAEA;;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,cAAT,EAAyBC,WAAzB,EAAsCC,2BAAtC,QAAyE,cAAzE;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AAEAR,GAAG,CAACS,GAAJ,CAAQR,SAAR;AAEA,IAAMS,MAAM,GAAG,IAAIT,SAAJ,CAAc;EAC3BU,IAAI,EAAE,SADqB;EAE3BC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;EAG3BC,cAH2B,4BAGV;IACf,OAAO;MAAEC,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;IAAX,CAAP;EACD,CAL0B;EAM3BC,MAAM,GACJ;IAAEC,IAAI,EAAE,GAAR;IAAaC,QAAQ,EAAE;MAAEC,IAAI,EAAE;IAAR;EAAvB,CADI,4BAEDf,KAFC,sBAGDD,MAHC,sBAIDE,cAJC,IAKJ;IACEY,IAAI,EAAE,GADR;IAEEC,QAAQ,EAAE;EAFZ,CALI;AANqB,CAAd,CAAf;AAkBAX,MAAM,CAACa,UAAP,CAAkB,UAACC,EAAD,EAAKC,CAAL,EAAQC,IAAR,EAAiB;EACjC,IAAMC,UAAU,GAAGxB,cAAc,EAAjC;;EAEA,IAAI,CAACD,WAAW,CAACsB,EAAD,CAAhB,EAAsB;IACpB;IACA,IAAI,CAACG,UAAL,EAAiB,OAAOD,IAAI,CAAC;MAAEJ,IAAI,EAAE;IAAR,CAAD,CAAX,CAFG,CAIpB;IACA;EACD,CATgC,CAWjC;;;EACA,IAAIE,EAAE,CAACI,IAAH,CAAQC,kBAAR,IAA8BF,UAAlC,EAA8C;IAC5C,IAAMG,QAAQ,GAAG1B,WAAW,EAA5B;IACAsB,IAAI,CAACrB,2BAA2B,CAACyB,QAAQ,GAAGA,QAAQ,CAACC,IAAZ,GAAmB,IAA5B,CAA5B,CAAJ;EACD;;EAED,OAAOL,IAAI,EAAX;AACD,CAlBD;AAoBA,eAAehB,MAAf"},"metadata":{},"sourceType":"module"}