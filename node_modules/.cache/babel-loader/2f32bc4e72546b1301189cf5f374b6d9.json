{"ast":null,"code":"var _this = this;\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    token: localStorage.getItem('user-token') || '',\n    status: '1231'\n  },\n  getters: {\n    isAuthenticated: function isAuthenticated(state) {\n      return !!state.token;\n    },\n    authStatus: function authStatus(state) {\n      return state.status;\n    }\n  },\n  actions: {\n    AUTH_REQUEST: function AUTH_REQUEST(_ref, user) {\n      var commit = _ref.commit,\n          dispatch = _ref.dispatch;\n      return new Promise(function (resolve, reject) {\n        // The Promise used for router redirect in login\n        commit(_this.AUTH_REQUEST);\n        axios({\n          url: 'auth',\n          data: user,\n          method: 'POST'\n        }).then(function (resp) {\n          var token = resp.data.token;\n          localStorage.setItem('user-token', token); // store the token in localstorage\n\n          commit(_this.AUTH_SUCCESS, token); // you have your token, now log in your user :)\n\n          dispatch(_this.USER_REQUEST);\n          resolve(resp);\n        }).catch(function (err) {\n          commit(_this.AUTH_ERROR, err);\n          localStorage.removeItem('user-token'); // if the request fails, remove any possible user token if possible\n\n          reject(err);\n        });\n      });\n    }\n  },\n  mutations: {\n    AUTH_REQUEST: function AUTH_REQUEST(state) {\n      state.status = 'loading';\n    },\n    AUTH_SUCCESS: function AUTH_SUCCESS(state, token) {\n      state.status = 'success';\n      state.token = token;\n    },\n    AUTH_ERROR: function AUTH_ERROR(state) {\n      state.status = 'error';\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","axios","use","Store","state","token","localStorage","getItem","status","getters","isAuthenticated","authStatus","actions","AUTH_REQUEST","user","commit","dispatch","Promise","resolve","reject","url","data","method","then","resp","setItem","AUTH_SUCCESS","USER_REQUEST","catch","err","AUTH_ERROR","removeItem","mutations"],"sources":["/home/daler/map/src/store.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n    state: {\n        token: localStorage.getItem('user-token') || '',\n        status: '1231',\n    },\n    getters: {\n        isAuthenticated: state => !!state.token,\n        authStatus: state => state.status,\n    },\n    actions: {\n        AUTH_REQUEST: ({commit, dispatch}, user) => {\n          return new Promise((resolve, reject) => { // The Promise used for router redirect in login\n            commit(this.AUTH_REQUEST)\n            axios({url: 'auth', data: user, method: 'POST' })\n              .then(resp => {\n                const token = resp.data.token\n                localStorage.setItem('user-token', token) // store the token in localstorage\n                commit(this.AUTH_SUCCESS, token)\n                // you have your token, now log in your user :)\n                dispatch(this.USER_REQUEST)\n                resolve(resp)\n              })\n            .catch(err => {\n              commit(this.AUTH_ERROR, err)\n              localStorage.removeItem('user-token') // if the request fails, remove any possible user token if possible\n              reject(err)\n            })\n          })\n        }\n    },\n    mutations: {\n        AUTH_REQUEST: (state) => {\n          state.status = 'loading'\n        },\n        AUTH_SUCCESS: (state, token) => {\n          state.status = 'success'\n          state.token = token\n        },\n        AUTH_ERROR: (state) => {\n          state.status = 'error'\n        },\n    }\n})\n"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAF,GAAG,CAACG,GAAJ,CAAQF,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACG,KAAT,CAAe;EAC1BC,KAAK,EAAE;IACHC,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,EAD1C;IAEHC,MAAM,EAAE;EAFL,CADmB;EAK1BC,OAAO,EAAE;IACLC,eAAe,EAAE,yBAAAN,KAAK;MAAA,OAAI,CAAC,CAACA,KAAK,CAACC,KAAZ;IAAA,CADjB;IAELM,UAAU,EAAE,oBAAAP,KAAK;MAAA,OAAIA,KAAK,CAACI,MAAV;IAAA;EAFZ,CALiB;EAS1BI,OAAO,EAAE;IACLC,YAAY,EAAE,4BAAqBC,IAArB,EAA8B;MAAA,IAA5BC,MAA4B,QAA5BA,MAA4B;MAAA,IAApBC,QAAoB,QAApBA,QAAoB;MAC1C,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;QAAE;QACxCJ,MAAM,CAAC,KAAI,CAACF,YAAN,CAAN;QACAZ,KAAK,CAAC;UAACmB,GAAG,EAAE,MAAN;UAAcC,IAAI,EAAEP,IAApB;UAA0BQ,MAAM,EAAE;QAAlC,CAAD,CAAL,CACGC,IADH,CACQ,UAAAC,IAAI,EAAI;UACZ,IAAMnB,KAAK,GAAGmB,IAAI,CAACH,IAAL,CAAUhB,KAAxB;UACAC,YAAY,CAACmB,OAAb,CAAqB,YAArB,EAAmCpB,KAAnC,EAFY,CAE8B;;UAC1CU,MAAM,CAAC,KAAI,CAACW,YAAN,EAAoBrB,KAApB,CAAN,CAHY,CAIZ;;UACAW,QAAQ,CAAC,KAAI,CAACW,YAAN,CAAR;UACAT,OAAO,CAACM,IAAD,CAAP;QACD,CARH,EASCI,KATD,CASO,UAAAC,GAAG,EAAI;UACZd,MAAM,CAAC,KAAI,CAACe,UAAN,EAAkBD,GAAlB,CAAN;UACAvB,YAAY,CAACyB,UAAb,CAAwB,YAAxB,EAFY,CAE0B;;UACtCZ,MAAM,CAACU,GAAD,CAAN;QACD,CAbD;MAcD,CAhBM,CAAP;IAiBD;EAnBI,CATiB;EA8B1BG,SAAS,EAAE;IACPnB,YAAY,EAAE,sBAACT,KAAD,EAAW;MACvBA,KAAK,CAACI,MAAN,GAAe,SAAf;IACD,CAHM;IAIPkB,YAAY,EAAE,sBAACtB,KAAD,EAAQC,KAAR,EAAkB;MAC9BD,KAAK,CAACI,MAAN,GAAe,SAAf;MACAJ,KAAK,CAACC,KAAN,GAAcA,KAAd;IACD,CAPM;IAQPyB,UAAU,EAAE,oBAAC1B,KAAD,EAAW;MACrBA,KAAK,CAACI,MAAN,GAAe,OAAf;IACD;EAVM;AA9Be,CAAf,CAAf"},"metadata":{},"sourceType":"module"}